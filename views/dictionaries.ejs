<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Сайт для интервального повторения информации. Поможет вам эффективно запоминать любую информацию и иностранные слова.">
    <meta name="keywords"
        content="интервальное повторение, запоминание информации, запоминание слов, запоминание иностранных слов, обучение, эффективное обучение, обучение с помощью интервалов, обучение с повторениями">
    <meta name="author" content="Райгель Владимир Александрович VRaygel">
    <link rel="icon" href="./favicon.png" type="image/png">
    <link rel="stylesheet" href="/css/style.css">
    <title>Memboost Разделы</title>
</head>

<body>
    <%- include('template.ejs') %>
        <%- include('menu.ejs') %>
            <div class="container">
                <div class="wrapper">
                    

                    <div class="purchase">
                        <form class="deleteProfil">
                            <!-- <a type="submit">Удалить профиль</a> -->
                            <button class="delete-button newDictonaries_button" type="submit"><a>Новый раздел</a></button>
                        </form>
                        <form class="deleteProfil" action="/study/repetition" method="GET">
                            <!-- <a type="submit">Удалить профиль</a> -->
                            <button class="delete-button" type="submit"><a>Повторять термины</a></button>
                        </form>
                        
                    </div>
                    
                    <h1>Разделы</h1>
                    
                        <!-- <h2>Создать</h2> -->
                        <% if (edit) { %>
                            <div class="newDictonaries">
                            <form action="/dictionaries/editDictionary/<%= dictionary._id %>" method="POST">

                                    <label for="dictionaryName">Название раздела:</label>
                                    <input type="text" id="dictionaryName" name="dictionaryName" required
                                        value="<%= dictionary.name %>">
                                    <button class="create-button" type="submit">Сохранить</button>
                            </form>
                            <% } else { %>
                                <div class="newDictonaries newDictonaries_none">
                                <form action="/dictionaries" method="POST">
                                    <label for="dictionaryName">Название нового раздела:</label>
                                    <input type="text" id="dictionaryName" name="dictionaryName" required>
                                    <button class="create-button" type="submit">Создать</button>
                                </form>
                                <% } %>
                    </div>
                    <% if (dictionaries.length > 0) { %>
                        <% dictionaries.forEach(dictionary=> { %>

                            <div class="dictionaryList_wrap">
                                <div class="purchase">
                                    <form class="deleteProfil" action="/dictionaries/editDictionary/<%= dictionary._id %>"
                                        method="GET">
                                        <!-- <a type="submit">Удалить профиль</a> -->
                                        <button class="delete-button newDictonaries_button" type="submit"><a>Редактировать</a></button>
                                    </form>
                                    <form class="deleteProfil" action="/dictionaries/deleteDictionary/<%= dictionary._id %>"
                                        method="POST" onsubmit="return confirm('Вы уверены, что хотите удалить этот раздел?')">
                                        <!-- <a type="submit">Удалить профиль</a> -->
                                        <button class="delete-button" type="submit"><a>Удалить раздел</a></button>
                                    </form>
                                </div>

                                <div class="dictionaryList_item">
                                    <a href="/dictionaries/dictionariesList/<%= dictionary._id %>">
                                        <h2 class="dictionaries_h2">
                                            <%= dictionary.name %>
                                        </h2>
                                    </a>
                                </div>

                            </div>

                            <% }); %>
                                <% } else { %>
                                    <p>У вас пока нет созданных разделов.</p>
                                    <% } %>
                </div>
            </div>
            <script src="/js/script.js"></script>
            <%- include('footer.ejs') %>
                <!-- JavaScript для подтверждения удаления словаря -->
                <script>
                    function confirmDelete(dictionaryId) {
                        if (confirm("Вы уверены, что хотите удалить этот словарь?")) {
                            window.location.href = "/dictionaries/deleteDictionary?id=" + dictionaryId;
                        }
                    }
                </script>
</body>

</html>